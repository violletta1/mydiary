{% extends 'base.html' %}
{% load static %}
{% block title %}
    DETAILS POSTS
{% endblock %}
{% block content %}
<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Course title, Intro to the course">
    <meta name="description" content="">
    <title>Post details</title>
    <link rel="stylesheet" href="{% static 'styles/nicepage.css' %}" media="screen">
<link rel="stylesheet" href="{% static 'styles/Post-details.css' %}" media="screen">
    <script class="u-script" type="text/javascript" src="{% static 'js/jquery.js' %}" defer=""></script>
    <script class="u-script" type="text/javascript" src="{% static 'js/nicepage.js' %}" defer=""></script>
    <meta name="generator" content="Nicepage 5.14.0, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">



    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Post details">
    <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/"></head>
      <body class="u-body u-xl-mode" data-lang="en"><header class="u-clearfix u-header u-header" id="sec-a106"><div class="u-clearfix u-sheet u-sheet-1"></div></header>
    <section class="u-clearfix u-section-1" id="sec-ae6b">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-expanded-width u-gutter-30 u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-row">
              <div class="u-container-style u-expand-resize u-layout-cell u-left-cell u-size-28 u-layout-cell-1">
                <div class="u-container-layout">
                  <div class="u-align-left u-custom-color-1 u-radius-50 u-shape u-shape-round u-shape-1"></div>
                {% if post.course.image %}
                        <img class="u-image u-image-circle u-preserve-proportions u-image-1" src="{{ post.course.image }}" alt="" data-image-width="225" data-image-height="225">
              {% elif post.treatment.photo_treatment %}
                     <img class="u-image u-image-circle u-preserve-proportions u-image-1" src="{{ post.treatment.photo_treatment }}" alt="" data-image-width="225" data-image-height="225">
                {% else %}
                    <img class="u-image u-image-circle u-preserve-proportions u-image-1" src="{% static 'images/logo.png' %}" alt="" data-image-width="225" data-image-height="225">
              {% endif %}
                </div>
              </div>
              <div class="u-align-left u-container-style u-layout-cell u-right-cell u-size-32 u-layout-cell-2">
                <div class="u-container-layout u-container-layout-2">
                  <h2 class="u-align-center u-subtitle u-text u-text-default u-text-1">{{ post.title }}</h2>
                  <div class="u-container-style u-group u-palette-2-light-3 u-radius-50 u-shape-round u-group-1">
                    <div class="u-container-layout u-container-layout-3">
                      <p class="u-large-text u-text u-text-default u-text-variant u-text-2">{{ post.body}}</p>
                    <p>
                         {% if post.course  %}
                      <a href="{% url 'details_course' pk=post.course.pk %}" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-1 u-palette-2-light-2 u-radius-22 u-btn-1">Course</a>
                    {% endif %}</p>
                    <p> {% if post.treatment  %}
                      <a href="{% url 'treatment_details' pk=post.treatment.pk %}" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-1 u-palette-2-light-2 u-radius-22 u-btn-1">Treatment</a>
                    {% endif %}</p>
                    </div>
                  </div>
                  <p class="u-text u-text-default u-text-3">{{ post.created_at}}</p>
                  <a href="{% url 'post_list' %}" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-light-3 u-palette-2-light-2 u-radius-6 u-btn-2">Back to posts</a>

                        {% if user.is_authenticated and user == post.user %}
                            <a href="{% url 'post_edit' pk=post.pk %}" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-4-dark-1 u-palette-2-light-3 u-radius-6 u-btn-3">Edit</a>
                            <a href="{% url 'delete_post' pk=post.pk %}" class="u-border-none u-btn u-btn-round u-button-style u-hover-palette-2-dark-1 u-palette-2-base u-radius-6 u-btn-4">Delete</a>
                        {% endif %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

      <style>
    /* Styles for All Comments Section */
    .all-comments {
        margin-top: 30px;
    }

    .comment-container {
        background-color: snow; /* Light pink */
        padding: 20px;
        margin-bottom: 15px;
        border-radius: 10px;
        display: flex;
    }

    .user-photo {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 10px;
    }

    .comment-details {
        flex: 1;
    }

    .user-name {
        color: #e73f71; /* Pink */
        font-weight: bold;
        margin-bottom: 5px;
    }

    .comment-text {
        margin: 0;
        font-size: 16px;
        line-height: 1.5;
    }

    .comment-timestamp {
        color: #9b9b9b; /* Light gray */
        font-size: 14px;
    }
        /* Styles for Add Comments Form */
    .addComments {
        background-color: white; /* Light pink */
        padding: 20px;
        margin-top: 30px;
        border-radius: 10px;
        display: flex;
        align-items: center;
    }

    .reaction {
        color: #e73f71; /* Pink */
        font-size: 24px;
        margin-right: 10px;
    }

    .comment-form {
        flex: 1;
    }

    .comment-form textarea {
        width: 40%;
        resize: vertical;
        padding: 10px;
        border: 1px solid #e73f71;
        border-radius: 5px;

    }

    .comment-form button {
        background-color: #e73f71; /* Pink */
        color: #ffffff;
        padding: 8px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .comment-form button:hover {
        background-color: #ff6384; /* Lighter pink */
    }
</style>

        <section>
    <div class="addComments">
        <div class="reaction">
            <h3>
                <i class="far fa-smile"></i>
            </h3>
        </div>

        <!-- Start Add Comments Form -->
        <form class="comment-form" method="post" action="{% url 'comment' model='post' model_id=post.pk %}">
            {{ comment_form }}
            {% csrf_token %}
            <button type="submit">Post</button>
        </form>
        <!-- End Add Comments Form -->

    </div>
</section>
      <section class="u-clearfix u-section-1" id="sec-ae6b">
            <div class="u-clearfix u-sheet u-sheet-1">
                <!-- Your existing course details content -->

                <!-- Start All Comments Section -->
                <div class="all-comments">
                    {% for comment in post.comment_set.all|dictsortreversed:"date_time_of_publication" %}
                    <div class="comment-container">
                        {% if comment.user.profile_picture %}
                        <img class="user-photo" src="{{ comment.user.profile_picture }}" alt="User Photo">
                        {% else %}
                        <img class="user-photo" src="{% static 'images/logo.png' %}" alt="Default User Photo">
                        {% endif %}
                        <div class="comment-details">
                            {% if comment.user.first_name and comment.user.last_name %}
                            <p class="user-name">{{ comment.user.first_name }} {{ comment.user.last_name }}</p>
                            {% else %}
                              <p class="user-name">Anonymous</p>
                            {% endif %}
                            <p class="comment-text">{{ comment.comment_text }}</p>
                            <span class="comment-timestamp">{{ comment.date_time_of_publication }}</span>

                        </div>
                     {% if comment.user == request.user %}
                <form action="{% url 'comment_delete' comment_id=comment.pk %}" method="post" class="delete-comment-form">
                    {% csrf_token %}
                    <button type="submit" class="delete-comment-btn" style="background-color: deeppink;">Delete</button>
                </form>
            {% endif %}
                    </div>
                    {% endfor %}
                </div>
                <!-- End All Comments Section -->

                <!-- Your existing footer and other content -->

            </div>
      </section>

</body></html>


{% endblock %}
